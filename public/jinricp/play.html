<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name=viewport
          content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui">
    <meta name="referrer" content="no-referrer">
    <title>jinricp</title>
    <style type="text/css">
        html, body {
            width: 100%;
            height: 100%;
            margin: auto;
            overflow: hidden;
        }
    </style>
</head>
<body>
<div id="mse"></div>
<script src="//unpkg.byted-static.com/xgplayer/2.31.6/browser/index.js" charset="utf-8"></script>
<script src="//unpkg.byted-static.com/xgplayer-hls.js/2.2.2/browser/index.js" charset="utf-8"></script>
<script>

    var url2 = new URL(location.href)
    var Host = 'https://mirror.ghproxy.com/https://raw.githubusercontent.com/niucnet/jinricp/main/GIF&字幕&m3u8/';
    var proxy = 'https://api.buxiangyao.link/srttovtt?url=';
    var poster = 'https://mirror.ghproxy.com/https://raw.githubusercontent.com/niucnet/jinricp/main/GIF%26%E5%AD%97%E5%B9%95%26m3u8/' + url2.searchParams.get('subtitle').split('/')[0];
    if ( url2.searchParams.get('subtitle').split('/')[0] == '3.25'){
        poster = poster + "/preview/pic_005.gif?raw=true";
    }else {
        poster = poster + "/preview/6.gif?raw=true";
    }
    var urlValue = decodeURIComponent(Host + url2.searchParams.get('url') || '')
    var subtitleValue = decodeURIComponent(proxy + url2.searchParams.get('subtitle') || '')
    console.log(urlValue)
    console.log(subtitleValue)

    let player = new HlsJsPlayer({
        "id": "mse",
        "playsinline": true,
        "whitelist": [
            ""
        ],
        "nativeTextTrack": [
            {
                // "src": "https://api.buxiangyao.link/play/20240223_221612 (1).vtt",
                "src": subtitleValue,
                "label": "字幕",
                "default": true
            }
        ],
        // "url": "https://mirror.ghproxy.com/https://raw.githubusercontent.com/niucnet/jinricp/main/GIF&字幕&m3u8/2.23/20240223_221612.m3u8",
        "url": urlValue,
        "pip": true,
        "screenShot": true,
        // 最小播放器
        "thumbnail": {
            "pic_num": 44,
            "width": 160,
            "height": 90,
            "col": 10,
            "row": 10,
            "urls": [
                ""
            ]
        },
        // 播放倍数
        "playbackRate": [
            0.5,
            1,
            2,
            4,
            8
        ],
        "keyShortcut": "on",
        "danmu": {
            "comments": [
                {
                    "duration": 15000,
                    "id": "2",
                    "start": 3000,
                    "txt": "长弹幕长弹幕长弹幕",
                    "mode": "top"
                },
                {
                    "duration": 15000,
                    "id": "3",
                    "start": 4000,
                    "txt": "长弹幕长弹幕长弹幕",
                    "mode": "bottom"
                },
                {
                    "duration": 15000,
                    "id": "4",
                    "start": 5000,
                    "txt": "长弹幕长弹幕长弹幕",
                    "mode": "scroll"
                },
                {
                    "duration": 15000,
                    "id": "5",
                    "start": 8000,
                    "txt": "长弹幕长弹幕长弹幕",
                    "mode": "scroll"
                }
            ],
            "area": {
                "start": 0,
                "end": 1
            },
            "closeDefaultBtn": false,
            "defaultOff": false,
            "panel": true
        },
        // 封面
        "poster": poster,
        "width": "100%",
        "height": "100%",
        // 流式布局
        "fluid": false
    });

</script>
</body>
</html>
